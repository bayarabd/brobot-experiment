<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/brobot/blog/rss.xml" title="Brobot RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/brobot/blog/atom.xml" title="Brobot Atom Feed"><title data-react-helmet="true">Image Analysis | Brobot</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://jspinak.github.io/brobot/docs/API/state structure/image-analysis"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Image Analysis | Brobot"><meta data-react-helmet="true" name="description" content="How carefully you select your images and define your regions"><meta data-react-helmet="true" property="og:description" content="How carefully you select your images and define your regions"><link data-react-helmet="true" rel="shortcut icon" href="/brobot/img/brobot-happy.ico"><link data-react-helmet="true" rel="canonical" href="https://jspinak.github.io/brobot/docs/API/state structure/image-analysis"><link data-react-helmet="true" rel="alternate" href="https://jspinak.github.io/brobot/docs/API/state structure/image-analysis" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://jspinak.github.io/brobot/docs/API/state structure/image-analysis" hreflang="x-default"><link rel="stylesheet" href="/brobot/assets/css/styles.66b9a977.css">
<link rel="preload" href="/brobot/assets/js/runtime~main.b69f1d81.js" as="script">
<link rel="preload" href="/brobot/assets/js/main.33d2d1ae.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/brobot/"><div class="navbar__logo"><img src="/brobot/img/brobot_logo/brobot-happy-text.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/brobot/img/brobot_logo/brobot-happy-text.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Home</b></a><a class="navbar__item navbar__link navbar__link--active" href="/brobot/docs/introduction/introduction">Introduction</a><a class="navbar__item navbar__link navbar__link--active" href="/brobot/docs/tutorial-basics/intro">Tutorial</a><a class="navbar__item navbar__link navbar__link--active" href="/brobot/docs/API/overview">API</a><a class="navbar__item navbar__link" href="/brobot/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorial - A Simple App</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">API</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/API/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Action Objects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Actions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">State and State Objects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">State Structure Builder</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/API/state structure/introduction">Building The State Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/API/state structure/naming-conventions">Naming Conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/API/state structure/attributes">Attributes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/brobot/docs/API/state structure/image-analysis">Image Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/API/state structure/transitions">Transitions</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Image Analysis</h1></header><p>How carefully you select your images and define your regions
will be key to the robustness and
effectiveness of your automation application. Identifying
the optimal images to use early on will save you lots of time and frustration.
Ideally, you should analyse and optimize your images before writing any code.
Brobot has functionality that is dedicated to pre-app image analysis. It works together
with the StateStructure builder to give you an idea of which images may cause
problems and what you may want to change.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="common-issues-with-images-and-regions">Common issues with images and regions<a aria-hidden="true" class="hash-link" href="#common-issues-with-images-and-regions" title="Direct link to heading">â€‹</a></h2><p>Adjusting the minimum similarity of images is a common technique for situations
where an image may vary slightly but still needs to be found with high certainty.
Min similarity is also adjusted in the opposite scenario, where similar images
exist on the screen, and it&#x27;s important to find only the one we want. Both scenarios
are a consequence of trial-and-error programming, something that we want to avoid when
developing automation software. Ideally, we will choose images that don&#x27;t require
adjusting the min similarity at some point down the line. </p><p>Sometimes we can&#x27;t choose an image that is unique. For example, we have a
&#x27;close&#x27; button like the &#x27;X&#x27; at the top right of a window that is the same for
all windows in the environment we are controlling. In this case, it is best to
set the SearchRegion, when possible, to look for only the window we want to close.
In addition, the &#x27;close&#x27; image should be set to <code>shared</code> so that it is not
used to find a State in the case that Brobot gets lost.   </p><p>Defining SearchRegions can be difficult during execution. If we are working with
images that don&#x27;t always appear in the same location, we will want to identify the
potential area where they could appear and limit our search to this area. Even if
we know in advance where this area is, identifying the exact coordinates on the
screen is not always precise or easy to do. In addition, finding regions during
execution is especially difficult when the regions contain few or no static
images. </p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="brobots-image-analysis">Brobot&#x27;s image analysis<a aria-hidden="true" class="hash-link" href="#brobots-image-analysis" title="Direct link to heading">â€‹</a></h2><p>During the process that builds the StateStructure, an analysis of each screenshot
is output to the console, and contains information on GROUP_DEFINE operations as
well as images and their matches under the following conditions:</p><ul><li>at least one match is found</li><li>the image has an active attribute on this screenshot whose operation fails  </li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="using-the-image-analysis">Using the image analysis<a aria-hidden="true" class="hash-link" href="#using-the-image-analysis" title="Direct link to heading">â€‹</a></h2><p>Errors in the attribute operations give us valuable information about our images.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="multiple-matches-found">Multiple matches found<a aria-hidden="true" class="hash-link" href="#multiple-matches-found" title="Direct link to heading">â€‹</a></h3><p>If an image should only be found once but is found multiple times in a screenshot,
we know that this is either a shared image or that it should be changed or replaced.
Shared images are sometimes necessary, but should include a defined SearchRegion
when possible. When an image does not have an active MULTIPLE_MATCHES attribute and
appears multiple times, it is initialized with the field <code>.isShared(true)</code>. Images
that are meant to be unique and appear once but are found multiple times are problems.
You should check out the screenshot and try to find the matches from the coordinates
given in the image analysis. If changing or replacing the image is not possible, think
about either defining the image&#x27;s SearchArea
to get rid of the other matches or using a different strategy to achieve you goal.  </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="image-not-found">Image not found<a aria-hidden="true" class="hash-link" href="#image-not-found" title="Direct link to heading">â€‹</a></h3><p>Not finding an image at all when it should be found is a sign of a poorly chosen image,
or of a non-static image that is not well suited for traditional image recognition.
If there is no way to use an image that is more static, you may want to change your
strategy for this specific process. There are almost always multiple ways to achieve
things in process automation.  </p><p>Failure to define a region is usually caused by not finding an image. Finding
too many matches or finding an image in the wrong place can result in an
incorrectly defined region. The coordinates and size of defined regions are printed
to the console along with information about images and matches.  </p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="defining-regions">Defining regions<a aria-hidden="true" class="hash-link" href="#defining-regions" title="Direct link to heading">â€‹</a></h2><p>Having well-defined SearchRegions will make your process flow more robust,
and many regions can and should be defined before execution by the
StateStructure build process. </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="defining-regions-without-static-images">Defining regions without static images<a aria-hidden="true" class="hash-link" href="#defining-regions-without-static-images" title="Direct link to heading">â€‹</a></h3><p>These regions are very difficult to capture during a real run,
but can be easily captured when using screenshots. For example, in order to capture
this region of a minimap during a real run, I would try to find
the one static image, which is the small circle in the top left with 2D written on it,
and then adjust the region around this match by guessing and readjusting my guesses.
If there were no static images, i would try to find static images that
appear outside the minimap and adjust the region.   </p><img src="https://jspinak.github.io/brobot/img/minimap.png" alt="minimap" width="200"><p>The attribute to use in this situation is REGION. When the filename of an image
contains the String &#x27;_r&#x27;, it will search for the image and write a StateRegion
with a pre-defined SearchRegion to the corresponding State. In order not to
receive error messages in the image analysis for every other screenshot, make
sure to specify the screenshot to use after the &#x27;_r&#x27; (i.e. &#x27;_r28&#x27;).  </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="defining-regions-with-non-static-images">Defining regions with non-static images<a aria-hidden="true" class="hash-link" href="#defining-regions-with-non-static-images" title="Direct link to heading">â€‹</a></h3><p>These are regions that have a variable number of images, each with
variable locations, and we want to find the region that includes all of them.
There are two ways to do this. The first is to take an image of the area you
think you need and give
it the TRANSFER attribute for this screenshot. The TRANSFER attribute will
transfer the match to the SearchRegions of all images in the State.<br>
<!-- -->Another option is to use GROUP_DEFINE, which will set the SearchRegions of each
image in the group to be the region that combines all of their matches.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="defining-the-region-of-a-state">Defining the region of a State<a aria-hidden="true" class="hash-link" href="#defining-the-region-of-a-state" title="Direct link to heading">â€‹</a></h3><p>Many States have one area of the screen where all the State objects can be found.
It is a good idea to set this region to be the SearchRegion for all images in the
State. Doing this with the StateStructure builder is easy. The attributes to use
are TRANSFER or GROUP_DEFINE.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://jspinak.github.io/brobot/docs/API/state structure/image-analysis.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/brobot/docs/API/state structure/attributes"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Attributes</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/brobot/docs/API/state structure/transitions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Transitions<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#common-issues-with-images-and-regions" class="table-of-contents__link toc-highlight">Common issues with images and regions</a></li><li><a href="#brobots-image-analysis" class="table-of-contents__link toc-highlight">Brobot&#39;s image analysis</a></li><li><a href="#using-the-image-analysis" class="table-of-contents__link toc-highlight">Using the image analysis</a><ul><li><a href="#multiple-matches-found" class="table-of-contents__link toc-highlight">Multiple matches found</a></li><li><a href="#image-not-found" class="table-of-contents__link toc-highlight">Image not found</a></li></ul></li><li><a href="#defining-regions" class="table-of-contents__link toc-highlight">Defining regions</a><ul><li><a href="#defining-regions-without-static-images" class="table-of-contents__link toc-highlight">Defining regions without static images</a></li><li><a href="#defining-regions-with-non-static-images" class="table-of-contents__link toc-highlight">Defining regions with non-static images</a></li><li><a href="#defining-the-region-of-a-state" class="table-of-contents__link toc-highlight">Defining the region of a State</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/brobot/docs/tutorial-basics/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/brobotJosh" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/brobot/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/jspinak/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgRljq-lHkMLrzRzpJC4HNw" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2022 Joshua Spinak</div></div></div></footer></div>
<script src="/brobot/assets/js/runtime~main.b69f1d81.js"></script>
<script src="/brobot/assets/js/main.33d2d1ae.js"></script>
</body>
</html>