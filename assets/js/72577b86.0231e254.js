"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2174],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=p(n),g=r,y=u["".concat(l,".").concat(g)]||u[g]||c[g]||i;return n?a.createElement(y,s(s({ref:t},d),{},{components:n})):a.createElement(y,s({ref:t},d))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=u;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var p=2;p<i;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},851:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:7},s="Get Island Type",o={unversionedId:"tutorial-basics/get-island-type",id:"tutorial-basics/get-island-type",title:"Get Island Type",description:"Here we determine the island type from the on-screen text.",source:"@site/docs/tutorial-basics/get-island-type.md",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/get-island-type",permalink:"/brobot/docs/tutorial-basics/get-island-type",draft:!1,editUrl:"https://jspinak.github.io/brobot/docs/tutorial-basics/get-island-type.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Define the Capture Region",permalink:"/brobot/docs/tutorial-basics/define-capture-region"},next:{title:"Save Labeled Images",permalink:"/brobot/docs/tutorial-basics/save-labeled-image"}},l={},p=[{value:"Go to a new Island and Get its Type",id:"go-to-a-new-island-and-get-its-type",level:2},{value:"Capturing Text",id:"capturing-text",level:2},{value:"Converting Text to Island Types",id:"converting-text-to-island-types",level:2}],d={toc:p};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"get-island-type"},"Get Island Type"),(0,r.kt)("p",null,"Here we determine the island type from the on-screen text."),(0,r.kt)("h2",{id:"go-to-a-new-island-and-get-its-type"},"Go to a new Island and Get its Type"),(0,r.kt)("p",null,"Here we call the transition directly instead of using Brobot's state management system\nby calling StateTransitionsManagement.openState(ISLAND). Normally we would use the\nstate management system, which takes care of everything related to transitions, including\nfinding and traversing paths. In this case, the state management system would not do\nanything because the Island state is already active. In this special situation, we want to\nperform the transition activities from the World state to the Island state even though the\nIsland state is already present. The reason we want to do this is that this transition will\ntake us to a different island. The Island state does not know whether the specific island\nhas changed. It only recognizes that it is on an island."),(0,r.kt)("p",null,"If the text we found on-screen contains any of these substrings,\nwe return the corresponding island type. Otherwise, we return an\nempty string."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'public String getIsland() {\n    worldTransitions.goToIsland();\n    String textRead = getIslandType();\n    for (Map.Entry<String, String> type : islandTypes.entrySet()) {\n        if (textRead.contains(type.getKey())) return type.getValue();\n    }\n    return "";\n}\n')),(0,r.kt)("h2",{id:"capturing-text"},"Capturing Text"),(0,r.kt)("p",null,"With the following action we retrieve the text found where the island\nnames are. We know that at least one name was already found when\nthe state management system opened the Island state, since the IslandName\nvariable is the only StateImageObject that identifies the Island state.\nSince the IslandName has already been found once, its SearchRegion will be defined\nas the region where it was first found. We can then use this SearchRegion to retrieve\nthe name of the new island type."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"private String getIslandType() {\n    ActionOptions getText = new ActionOptions.Builder()\n            .setAction(ActionOptions.Action.GET_TEXT)\n            .getTextUntil(ActionOptions.GetTextUntil.TEXT_APPEARS)\n            .setUseDefinedRegion(true)\n            .setMaxWait(3)\n            .setPauseBeforeBegin(3)\n            .build();\n    ObjectCollection islandName = new ObjectCollection.Builder()\n            .withRegions(island.getIslandName().getSearchRegion())\n            .build();\n    return action.perform(getText, islandName).getSelectedText();\n}\n")),(0,r.kt)("h2",{id:"converting-text-to-island-types"},"Converting Text to Island Types"),(0,r.kt)("p",null,'First, we create a variable that maps pieces of the island type\nwords that are representative of these words. For example, "Mine"\nis representative of the type Mines; if our text retrieval function\nfinds the word "Minez", we can assume that the real text is "Mines",\nsince the string "Mine" is part of "Minez".'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'private Map<String, String> islandTypes = new HashMap<>();\n{\n    islandTypes.put("Burg", "Castle");\n    islandTypes.put("Mine", "Mines");\n    islandTypes.put("Farm", "Farms");\n    islandTypes.put("Moun", "Mountains");\n    islandTypes.put("Fore", "Forest");\n    islandTypes.put("Lake", "Lakes");\n}\n')))}c.isMDXComponent=!0}}]);